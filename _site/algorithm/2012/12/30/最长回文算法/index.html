
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>最长回文算法</title>
    
    <meta name="author" content="Jay shaolianbo">

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/themes/twitter/bootstrap/css/bootstrap.2.2.2.min.css" rel="stylesheet">
    <link href="/assets/themes/twitter/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">

    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->

    <!-- atom & rss feed -->
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">

  </head>

  <body>
    <div class="navbar">
      <div class="navbar-inner">
        <div class="container-narrow">
          <a class="brand" href="/">Seven</a>
          <ul class="nav">
            
            
            


  
    
      
    
  
    
      
      	
      	<li><a href="/tags.html">Tags</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/categories.html">Categories</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/archive.html">Archive</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/pages.html">Pages</a></li>
      	
      
    
  
    
      
    
  



          </ul>
        </div>
      </div>
    </div>

    <div class="container-narrow">

      <div class="content">
        
<div class="page-header">
  <h1>最长回文算法 </h1>
</div>

<div class="row-fluid post-full">
  <div class="span12">
    <div class="date">
      <span>30 December 2012</span>
    </div>
    <div class="content">
      <h3 id="1">1.直接比较法。</h3>

<p>假设当前位置为回文的中点，比较两侧的相等字符个数。 eg:s1=”123abccba45”,首先变为”1#2#3#a#b#c#c#b#a#4#5#” 这样做的原因是使算法更简练：假设字符c是回文中点，但有两种情况，回文是奇数长度和偶数长度。 将字符串扩展后，偶数长回文都是在#处分析。</p>

<pre><code>int  huiwen(char* input,int length,char* output)  
{  
	if((input==0)||(length&lt;1))  
		exit(1);  
	char* new_input=new char[2*length];  
	for(int i=0;i&lt;length;i++)  
	{  
		new_input[2*i]=input[i];  
		new_input[2*i+1]='#';  
	}  
	int start=0;  
	int size=1;  
	int index=1;  
	int new_length=2*length;  
	for(;index&lt;new_length;index++)  
	{  
		int n=1;  
		while((index-n)&gt;=0 &amp;&amp; (index+n)&lt;new_length &amp;&amp;   
				new_input[index-n]==new_input[index+n])  
			n++;  
		if((n-1)&gt;size)  
		{  
			if(index%2==0)  
				start=index/2-(n-1)/2;  
			else  
				start=(index-n+2)/2;  
			size=n-1;  
		}     
	}  
	delete[] new_input;  
	memmove(output,input+start,size);  
	output[size]=0;  
	return size;  
}  </code></pre>

<h3 id="2">2.动态规划</h3>

<p>这里动态规划的思路是 dp[i][j] 表示的是 从i 到 j 的字串，是否是回文串。 则根据回文的规则我们可以知道： 如果s[i] == s[j] 那么是否是回文决定于 dp[i+1][ j - 1] 当 s[i] != s[j] 的时候， dp[i][j] 直接就是 false。 动态规划的进行是按照字符串的长度从1 到 n推进的。</p>

<pre><code>int huiwen2(char* pstr,int length,char* pout)  
{  
	if(!pstr || length&lt;1 || !pout)  
		abort();  
	bool** bre=new bool*[length];  
	for(int m=0;m&lt;length;m++)  
		bre[m]=new bool[length];  
	for(int i=0;i&lt;length;i++)  
	{  
		bre[i][i]=true;  
	}  
	int max=1;  
	int max_index=0;  
	for(int n=2;n&lt;=length;n++)  
	{  
		for(int j=0;j&lt;=(length-n);j++)  
		{  
			if((pstr[j]==pstr[j+n-1]) &amp;&amp; (bre[j+1][(n==2)?(j+1):(j+n-2)]))  
			{  
				bre[j][j+n-1]=true;  
				max=n;  
				max_index=j;  
			}  
			else  
				bre[j][j+n-1]=false;  
		}  
	}  
	for(int m=0;m&lt;length;m++)  
		delete[] bre[m];  
	delete[] bre;  
	for(int k=0;k&lt;max;k++)  
		pout[k]=pstr[max_index+k];  
	pout[max]='\0';  
	return max;  
}  </code></pre>

<h3 id="3kmp">3.kmp算法：</h3>

<p>对于串S, 假设它的 Reverse是 S’, 那么S的最长回文串是 S 和 S’ 的最长公共字串。</p>

<p>例如 S = abcddca, S’ = acddcba， S和S’的最长公共字串是 cddc 也是S的最长回文字串。</p>

<p>如果S‘是 模式串，我们可以对S’的所有后缀枚举(S0, S1, S2, Sn) 然后用每个后缀和S匹配，寻找最长的匹配前缀。</p>

<p>例如当前枚举是 S0 = acddcba 最长匹配前缀是 a</p>

<p>S1 = cddcba 最长匹配前缀是 cddc</p>

<p>S2 = ddcba 最长匹配前缀是 ddc</p>
    </div>

  
    <ul class="tag_box inline">
      <li><i class="icon-folder-open"></i></li>
      
      


  
     
    	<li><a href="/categories.html#algorithm-ref">
    		algorithm <span>9</span>
    	</a></li>
    
  


    </ul>
    

  
    <ul class="tag_box inline">
      <li><i class="icon-tags"></i></li>
      
      


  
     
    	<li><a href="/tags.html#algorithm-ref">algorithm <span>8</span></a></li>
     
    	<li><a href="/tags.html#回文-ref">回文 <span>1</span></a></li>
    
  



    </ul>
    

    <hr>
    <div class="pagination">
      <ul>
      
        <li class="prev"><a href="/algorithm/2012/12/30/KMP%E5%AD%97%E4%B8%B2%E5%8C%B9%E9%85%8D%E7%AE%97%E6%B3%95" title="KMP字符串匹配算法">&larr; Previous</a></li>
      
        <li><a href="/archive.html">Archive</a></li>
      
        <li class="next"><a href="/2013/01/30/trie" title="Trie">Next &rarr;</a></li>
      
      </ul>
    </div>
    <hr>
    <!-- Duoshuo Comment BEGIN -->
<div class="ds-thread"></div>
<script type="text/javascript">
var duoshuoQuery = {short_name:"shaolianbo"};
(function() {
 var ds = document.createElement('script');
 ds.type = 'text/javascript';ds.async = true;
 ds.src = 'http://static.duoshuo.com/embed.js';
 ds.charset = 'UTF-8';
 (document.getElementsByTagName('head')[0] 
  || document.getElementsByTagName('body')[0]).appendChild(ds);
 })();
</script>
<!-- Duoshuo Comment END -->

  </div>
</div>


      </div>
      <hr>
      <footer>
        <p>&copy; 2014 Jay shaolianbo
          with help from <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
          and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>
        </p>
      </footer>

    </div>

    
  </body>
</html>

